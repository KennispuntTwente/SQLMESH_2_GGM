# SQLMesh project configuration
# See: https://sqlmesh.readthedocs.io/en/stable/guides/configuration/

gateways:
  # Local development with PostgreSQL
  local:
    connection:
      type: postgres
      host: {{ env_var('POSTGRES_HOST', 'localhost') }}
      port: {{ env_var('POSTGRES_PORT', '5432') }}
      database: {{ env_var('POSTGRES_DATABASE', 'ggm_dev') }}
      user: {{ env_var('POSTGRES_USER', 'ggm') }}
      password: {{ env_var('POSTGRES_PASSWORD', 'ggm_dev') }}

  # Local development with DuckDB (no server needed)
  duckdb:
    connection:
      type: duckdb
      database: ggm_dev.db

  # Local development with MSSQL
  mssql:
    connection:
      type: mssql
      host: {{ env_var('MSSQL_HOST', 'localhost') }}
      port: {{ env_var('MSSQL_PORT', '1433') }}
      database: {{ env_var('MSSQL_DATABASE', 'ggm_dev') }}
      user: {{ env_var('MSSQL_USER', 'sa') }}
      password: {{ env_var('MSSQL_PASSWORD', 'GGM_Dev123!') }}
      # ODBC driver configuration (for pyodbc driver)
      # Default driver is pymssql; set driver: odbc to use ODBC
      # driver: odbc
      # driver_name: {{ env_var('MSSQL_ODBC_DRIVER', 'ODBC Driver 18 for SQL Server') }}
      # odbc_properties:
      #   TrustServerCertificate: {{ env_var('MSSQL_TRUST_CERT', 'yes') }}

  # Local development with MySQL
  mysql:
    connection:
      type: mysql
      host: {{ env_var('MYSQL_HOST', 'localhost') }}
      port: {{ env_var('MYSQL_PORT', '3306') }}
      database: {{ env_var('MYSQL_DATABASE', 'ggm_dev') }}
      user: {{ env_var('MYSQL_USER', 'root') }}
      password: {{ env_var('MYSQL_PASSWORD', 'ggm_dev') }}

  # Cloud gateways - uncomment and configure as needed
  # snowflake:
  #   connection:
  #     type: snowflake
  #     account: your_account
  #     user: your_user
  #     password: your_password
  #     database: GGM_DEV
  #     warehouse: COMPUTE_WH
  #
  # bigquery:
  #   connection:
  #     type: bigquery
  #     project: your-gcp-project
  #     location: EU

default_gateway: local

model_defaults:
  dialect: postgres
  start: "2024-01-01"
